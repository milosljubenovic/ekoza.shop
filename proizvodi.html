---
layout: default
title: Proizvodi
---

<div class="bg-gradient-to-b from-slate-900 to-slate-800 min-h-screen py-16">
<div class="container mx-auto px-4 py-8">
  <h1 class="text-5xl font-bold mb-12 text-white text-center">
    Svi <span class="text-gradient">Proizvodi</span>
  </h1>

  <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
    <!-- Filters Sidebar -->
    <aside class="lg:col-span-1">
      <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-2xl shadow-2xl p-6 sticky top-24 border border-slate-600">
        <h2 class="text-2xl font-bold mb-6 text-white">Filteri</h2>

        <!-- Category Filter -->
        <div class="mb-6">
          <h3 class="font-semibold mb-4 text-purple-400">Kategorija</h3>
          <div class="space-y-3">
            <label class="flex items-center group cursor-pointer">
              <input type="checkbox" class="category-filter w-5 h-5 text-purple-600 rounded border-slate-600 bg-slate-700" value="all" checked>
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">Sve kategorije</span>
            </label>
            {% assign categories = site.products | map: "category" | uniq | sort %}
            {% for category in categories %}
            <label class="flex items-center group cursor-pointer">
              <input type="checkbox" class="category-filter w-5 h-5 text-purple-600 rounded border-slate-600 bg-slate-700" value="{{ category }}">
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">{{ category }}</span>
            </label>
            {% endfor %}
          </div>
        </div>

        <!-- Price Filter -->
        <div class="mb-6">
          <h3 class="font-semibold mb-4 text-purple-400">Cena</h3>
          <div class="space-y-3">
            <label class="flex items-center group cursor-pointer">
              <input type="radio" name="price" class="price-filter w-5 h-5 text-purple-600 border-slate-600 bg-slate-700" value="all" checked>
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">Sve cene</span>
            </label>
            <label class="flex items-center group cursor-pointer">
              <input type="radio" name="price" class="price-filter w-5 h-5 text-purple-600 border-slate-600 bg-slate-700" value="0-3000">
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">0 - 3,000 RSD</span>
            </label>
            <label class="flex items-center group cursor-pointer">
              <input type="radio" name="price" class="price-filter w-5 h-5 text-purple-600 border-slate-600 bg-slate-700" value="3000-6000">
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">3,000 - 6,000 RSD</span>
            </label>
            <label class="flex items-center group cursor-pointer">
              <input type="radio" name="price" class="price-filter w-5 h-5 text-purple-600 border-slate-600 bg-slate-700" value="6000-10000">
              <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">6,000+ RSD</span>
            </label>
          </div>
        </div>

        <!-- Availability Filter -->
        <div class="mb-6">
          <h3 class="font-semibold mb-4 text-purple-400">Dostupnost</h3>
          <label class="flex items-center group cursor-pointer">
            <input type="checkbox" id="inStockOnly" class="w-5 h-5 text-purple-600 rounded border-slate-600 bg-slate-700">
            <span class="ml-3 text-sm text-gray-300 group-hover:text-white transition-colors">Samo na stanju</span>
          </label>
        </div>

        <!-- Clear Filters -->
        <button onclick="clearFilters()" class="w-full bg-slate-600 hover:bg-slate-500 text-white font-semibold py-3 rounded-xl transition-all">
          Obriši filtere
        </button>
      </div>
    </aside>

    <!-- Products Grid -->
    <div class="lg:col-span-3">
      <!-- Search and Sort -->
      <div class="flex flex-col sm:flex-row gap-4 mb-8">
        <div class="flex-1">
          <input type="text" id="productSearch" placeholder="Pretražite lazy bag proizvode..." class="w-full bg-slate-800 border border-slate-600 rounded-xl px-6 py-4 text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
        </div>
        <select id="sortSelect" class="bg-slate-800 border border-slate-600 rounded-xl px-6 py-4 text-white sm:w-56 focus:ring-2 focus:ring-purple-500 transition-all">
          <option value="default">Sortiranje</option>
          <option value="price-asc">Cena: Rastuće</option>
          <option value="price-desc">Cena: Opadajuće</option>
          <option value="name-asc">Ime: A-Z</option>
          <option value="name-desc">Ime: Z-A</option>
        </select>
      </div>

      <!-- Products Count -->
      <div class="mb-6">
        <p class="text-gray-400">Prikazano <span id="productCount" class="text-purple-400 font-bold">{{ site.products.size }}</span> proizvoda</p>
      </div>

      <!-- Products Grid -->
      <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for product in site.products %}
        <div class="product-card product-item" 
             data-id="{{ product.product_id }}"
             data-name="{{ product.title | downcase }}"
             data-category="{{ product.category }}"
             data-price="{{ product.price }}"
             data-in-stock="{{ product.in_stock }}">
          <a href="{{ product.url }}">
            <div class="relative overflow-hidden rounded-t-2xl">
              <img src="{{ product.images[0] }}" alt="{{ product.title }}" class="w-full h-64 object-cover transform hover:scale-110 transition-transform duration-500">
              {% if product.old_price %}
              <span class="absolute top-3 right-3 bg-gradient-to-r from-red-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg">
                -{{ product.old_price | minus: product.price | times: 100 | divided_by: product.old_price }}%
              </span>
              {% endif %}
              {% unless product.in_stock %}
              <span class="absolute top-3 left-3 bg-slate-900/80 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-semibold">
                Rasprodato
              </span>
              {% endunless %}
            </div>
            <div class="p-5">
              <h3 class="font-bold text-white mb-2 hover:text-purple-400 transition-colors text-lg">{{ product.title }}</h3>
              <p class="text-sm text-gray-400 mb-4">{{ product.category }}</p>
              <div class="flex items-center justify-between mb-4">
                <div>
                  <span class="text-2xl font-bold text-white">{{ product.price }} RSD</span>
                  {% if product.old_price %}
                  <span class="text-sm text-gray-500 line-through ml-2">{{ product.old_price }} RSD</span>
                  {% endif %}
                </div>
              </div>
            </div>
          </a>
          <div class="px-5 pb-5">
            <button onclick="addToCart('{{ product.title }}', {{ product.price }}, '{{ product.images[0] }}', '{{ product.url }}')" 
                    class="w-full btn-primary-modern"
                    {% unless product.in_stock %}disabled{% endunless %}>
              Dodaj u korpu
            </button>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- No Results Message -->
      <div id="noResults" class="text-center py-16 hidden">
        <svg class="w-20 h-20 mx-auto text-slate-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-gray-400 text-lg">Nema proizvoda koji odgovaraju vašoj pretrazi.</p>
      </div>
    </div>
  </div>
</div>
</div>

<script>
// Filter and Search functionality
document.addEventListener('DOMContentLoaded', function() {
  const productItems = document.querySelectorAll('.product-item');
  const searchInput = document.getElementById('productSearch');
  const sortSelect = document.getElementById('sortSelect');
  const categoryFilters = document.querySelectorAll('.category-filter');
  const priceFilters = document.querySelectorAll('.price-filter');
  const inStockOnly = document.getElementById('inStockOnly');
  const productsGrid = document.getElementById('productsGrid');
  const noResults = document.getElementById('noResults');
  const productCount = document.getElementById('productCount');

  function filterProducts() {
    let visibleCount = 0;
    const searchTerm = searchInput.value.toLowerCase();
    const selectedCategories = Array.from(categoryFilters)
      .filter(cb => cb.checked && cb.value !== 'all')
      .map(cb => cb.value);
    const allCategoriesChecked = document.querySelector('.category-filter[value="all"]').checked;
    const selectedPrice = document.querySelector('.price-filter:checked').value;
    const onlyInStock = inStockOnly.checked;

    productItems.forEach(item => {
      const name = item.dataset.name;
      const category = item.dataset.category;
      const price = parseInt(item.dataset.price);
      const inStock = item.dataset.inStock === 'true';

      let show = true;

      // Search filter
      if (searchTerm && !name.includes(searchTerm)) {
        show = false;
      }

      // Category filter
      if (!allCategoriesChecked && selectedCategories.length > 0 && !selectedCategories.includes(category)) {
        show = false;
      }

      // Price filter
      if (selectedPrice !== 'all') {
        const [min, max] = selectedPrice.split('-').map(Number);
        if (max && (price < min || price > max)) {
          show = false;
        } else if (!max && price < min) {
          show = false;
        }
      }

      // Stock filter
      if (onlyInStock && !inStock) {
        show = false;
      }

      if (show) {
        item.style.display = '';
        visibleCount++;
      } else {
        item.style.display = 'none';
      }
    });

    productCount.textContent = visibleCount;
    
    if (visibleCount === 0) {
      noResults.classList.remove('hidden');
    } else {
      noResults.classList.add('hidden');
    }
  }

  function sortProducts() {
    const sortValue = sortSelect.value;
    const items = Array.from(productItems);

    items.sort((a, b) => {
      switch(sortValue) {
        case 'price-asc':
          return parseInt(a.dataset.price) - parseInt(b.dataset.price);
        case 'price-desc':
          return parseInt(b.dataset.price) - parseInt(a.dataset.price);
        case 'name-asc':
          return a.dataset.name.localeCompare(b.dataset.name);
        case 'name-desc':
          return b.dataset.name.localeCompare(a.dataset.name);
        default:
          return 0;
      }
    });

    items.forEach(item => productsGrid.appendChild(item));
  }

  // Event listeners
  searchInput.addEventListener('input', filterProducts);
  sortSelect.addEventListener('change', sortProducts);
  categoryFilters.forEach(filter => filter.addEventListener('change', filterProducts));
  priceFilters.forEach(filter => filter.addEventListener('change', filterProducts));
  inStockOnly.addEventListener('change', filterProducts);

  // All categories checkbox
  const allCategoriesCheckbox = document.querySelector('.category-filter[value="all"]');
  allCategoriesCheckbox.addEventListener('change', function() {
    if (this.checked) {
      categoryFilters.forEach(cb => {
        if (cb.value !== 'all') cb.checked = false;
      });
    }
  });

  categoryFilters.forEach(cb => {
    if (cb.value !== 'all') {
      cb.addEventListener('change', function() {
        if (this.checked) {
          allCategoriesCheckbox.checked = false;
        }
      });
    }
  });
});

function clearFilters() {
  document.getElementById('productSearch').value = '';
  document.getElementById('sortSelect').value = 'default';
  document.querySelectorAll('.category-filter').forEach(cb => {
    cb.checked = cb.value === 'all';
  });
  document.querySelectorAll('.price-filter').forEach(rb => {
    rb.checked = rb.value === 'all';
  });
  document.getElementById('inStockOnly').checked = false;
  
  document.querySelectorAll('.product-item').forEach(item => {
    item.style.display = '';
  });
  
  document.getElementById('productCount').textContent = document.querySelectorAll('.product-item').length;
  document.getElementById('noResults').classList.add('hidden');
}
</script>
